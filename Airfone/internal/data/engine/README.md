# 内存存储引擎设计

这里分成了三个大板块，分别对应了生产者，消费者，异步调度(为心跳准备的)

这里的时间表示都是 int64，原因是为了节省空间， time.Timer 占据了 24 个字节，然而当我们使用纳秒为单位表示时间，int64 仅占据了8个字节，每一个结构体就能节省16个字节。

## ConsumerMap

这个结构体中存储的是一个以 id 为 key 的映射集合，值对应的是该id消费者所依赖的topic列表，以及其更新时间

当心跳发送到服务端，服务端就会通过 value 中的更新时间去遍历 providerMap 对应的 topic，若 topic 更新时间大于消费者更新时间，则将其记录下来在心跳中返回，服务端会根据返回信息重新拉取信息，并修改 consumer 的更新时间

## ProviderMap

这个结构是通过 map 去存储另一个 map 结构，外层map通过名字对应一个主题topic

topic 中对应一个 map 结构，存储的是该 topic 类型服务的提供者信息，当有消费者来消费时，就随机拉取一个服务交给消费者

## schedule

这是用于异步调度任务的结构体，